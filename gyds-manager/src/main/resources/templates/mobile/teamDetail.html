<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=750">
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<script type="text/javascript" th:src="@{/mobile/js/jquery-1.10.1.min.js}"></script>
		<script type="text/javascript" th:src="@{/mobile/js/mobile-util.js}"></script>
		<script type="text/javascript" th:src="@{/mobile/js/idangerous.swiper.scrollbar-2.1.js}"></script>
		<link rel="stylesheet" th:href="@{/mobile/css/index.css}">
		<link rel="stylesheet" th:href="@{/mobile/css/lunbo.css}">
		<link rel="stylesheet" th:href="@{/mobile/vdist/idangerous.swiper.css}">
		
		
		<script th:src="@{/js/plugins/validate/jquery.validate.min.js}"></script>
		<script th:src="@{/js/plugins/validate/messages_zh.min.js}"></script>
		<script th:src="@{/js/validate.js}"></script>
		<script th:src="@{/js/plugins/layer/layer.js}"></script>
		<script th:src="@{/js/layui.js}"></script>
		<style>
			.tongji{
				position:relative;
			}
			.rutuanbtn{
				position: absolute;
				width: 120px;
				line-height:30px;
				background:red;
				text-align: center;
				color:#fff;
				right: 13px;
				bottom:20px;
			}
			.rutuanbtn a{
				color:#fff;
			}
		</style>
	</head>
	<body> 
		<header>
			<div class="login">
				<img src="images/logo.png" alt="">
			</div>
			<div class="header-center">
				<select style="width: 135px;
				height: 30px;
				-webkit-appearance: none;
				background:url(images/input_03.jpg)no-repeat right;
				background-size:30px 30px;
				background-color: #fff;" onchange="_area()" id="area">
					 <option th:each="area: ${areaList}" th:value="${area.regionCode}"
						th:text="${area.regionName}"></option>
				</select> 
			</div>
			<div class="header-loginimg">
				<img src="images/mylogin.jpg" alt="">
			</div>
		</header>
		<div class="nav">
			<a href="#">网站首页</a>
			<a href="#">咨询动态</a>
			<a href="#">活动报名</a>
			<a href="#">志愿者</a>
			<a href="#">团队展示</a>
		</div>
		<div class="guanggao">
			<img src="images/tp2.jpg" alt="">
		</div>
		<!-- 轮播 -->
		<div class="device">
		  <div class="swiper-container">
		    <div class="swiper-wrapper">
		      <div class="swiper-slide" th:each="newInfo: ${newList}">
						<img th:src="${newInfo.titleImg}">
			   </div>
		    </div>
		  </div>
		  <div class="pagination"></div>
		</div>
		<!-- 结束 -->
		<div class="tongji">
			<input type="hidden" th:value="${teamId}" id="teamId"/>
			<input type="hidden" th:value="${nameId}" id="nameId"/>
			<div class="tongji1">
				<div class="tongjitxt">
					<i></i>咨询动态 <span><a th:href="@{/pc/news/infoList(areaId=${areaId},flag=0)}"><img th:src="@{/mobile/images/xuanze.jpg}" alt=""></a></span>
				</div>
				<ul>
					<li th:each="newInfo,iterStat: ${newList}"><span th:text="${iterStat.count}"></span><a th:href="@{/pc/news/info(id=${newInfo.id})}" th:text="${newInfo.title}"> <img th:src="#{newInfo.titleImg}" alt=""></a><rem th:text="${#dates.format(newInfo.publicTime, 'MM-dd ')}"></rem></li>
				</ul>
				
			</div>
		</div>
		<div class="guanggao">
			<img src="images/tp2.jpg" alt="">
		</div>
		<!-- 志愿服务数据统计 -->
		<div class="tongji">
			<div class="tongjitxt" style="margin-bottom:37px;">
				<i></i>志愿服务数据统计<span></span>
			</div>
			<div class="tongjicon">
				<img src="images/index_17.jpg" alt="">
				<span>实名志愿者总数</span>
				<rem>45342</rem>
			</div>
			<div class="tongjicon">
				<img src="images/index_21.jpg" alt="">
				<span>志愿团体总数</span>
				<rem>121</rem>
			</div>
			<div class="tongjicon">
				<img src="images/index_24.jpg" alt="">
				<span>发布活动者次数</span>
				<rem>45342</rem>
			</div>
			<div class="tongjicon">
				<img src="images/index_26.jpg" alt="">
				<span>发布资讯数量</span>
				<rem>452</rem>
			</div>
			<!-- <!-- 红色的 -->
			<div class="rutuanbtn">
				<a href="#">入团申请</a>
			</div> -->
			<!-- 灰色的 -->
			<div class="rutuanbtn"  th:if="${status} eq '1'">
				<a href="javaScript:;" onclick="teamRemove()">取消申请</a>
			</div>
			<div class="rutuanbtn"  th:if="${status} eq '2'">
				<a href="javaScript:teamApply()">入团申请</a>
			</div>
			<div class="rutuanbtn"  th:if="${status} eq '3'">
				<a href="javaScript:;">您已是本团成员</a>
			</div>
			
		</div>
		<!-- 活动报名 -->
		<div class="baoming">
			<div class="tongjitxt" style="width:95%;">
				<i></i>活动报名<span><img src="images/xuanze.jpg" alt=""></span>
			</div>
			<div class="baomingcen">
				<div th:each="act: ${actList}">
					<a th:href="@{/pc/activityDetail(id=${act.id})}"><img th:src="${act.actTitleImg}" alt=""></a>
					<span th:text="${act.actTitle}"></span>
					<p th:text="${act.actIntro}"></p>
					<rem>
						<span th:text="${act.actType==0}?'免费':'收费'"></span>
						<span th:text="${act.numberOfApplicants}+人已报名"></span>
					</rem>
				</div>
			</div>
		</div>
		<div class="zhiyuan">
			<div class="tongjitxt" style="width:95%;">
				<i></i>志愿者<span><img src="images/xuanze.jpg" alt=""></span>
			</div>
			<div class="zhiyuanCen">
				<div th:each="volunt: ${voluntList}">
					<a th:href=" '/pc/volunteerDetail?id=' + ${volunt.id}"><img th:src="${volunt.headImg}" alt=""></a>
					<p th:text="${volunt.volunteerName}"></p>
				</div>
			</div>
		</div>
		<div class="guanggao">
			<img src="images/tp2.jpg" alt="">
		</div>
		<div th:replace="mobile/include :: footer"></div>
	</body>
</html>
<script th:src="@{/mobile/dist/idangerous.swiper.min.js}"></script>
<script>
	  var mySwiper = new Swiper('.swiper-container',{
		pagination: '.pagination',
		loop:true,
		grabCursor: true,
		paginationClickable: true
	  })
	  $('.arrow-left').on('click', function(e){
		e.preventDefault()
		mySwiper.swipePrev()
	  })
	  $('.arrow-right').on('click', function(e){
		e.preventDefault()
		mySwiper.swipeNext()
	  })
	  
	  function _area(){
		console.log($("#area").val());
		window.location.href = "/?areaId="+$("#area").val();
	}
	  
	  
	  
	  function teamApply() {
			var teamId = $("#teamId").val();
		 	$.ajax({
		        type : "POST",
		        dataType: "json",
		        url : "/pc/team/apply",
		        data : {
		        	'id': teamId
		        },
		        success : function(result) {
		        	var status = result.status;
		        	var url = result.url;
		        	console.log(status)
		        	if (status == 1) {
		        		alert("申请成功");
		        		history.go(0);
		        	} else if (status == 2){
		        		alert("您还没登录，请先登录");
		        	} else if (status == 3){
		        		alert("您还不是志愿者，请先申请志愿者");
		        		window.location.href=url;
		        	} else if (status == 4){
		        		alert("报名失败，您已是团队成员");
		        	} else {
		        		alert("操作失败");
		        	}
		        }
		    }); 
		}
	  function teamRemove() {
			var nameId = $("#nameId").val();
		 	$.ajax({
		        type : "POST",
		        dataType: "json",
		        url : "/pc/team/remove",
		        data : {
		        	'id': nameId
		        },
		        success : function(result) {
		        	var status = result.status;
		        	var url = result.url;
		        	console.log(status)
		        	if (status == 1) {
		        		alert("取消成功");
		        		history.go(0);
		        	} else if (status == 2){
		        		alert("您还没登录，请先登录");
		        	} else if (status == 3){
		        		alert("取消失败");
		        	} else {
		        		alert("操作失败");
		        	}
		        }
		    }); 
		}
</script>