<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		 <meta name="viewport" content="width=750">
		<link rel="stylesheet" th:href="@{/mobile/css/Personal.css}">
		<link th:href="@{/css/layui.css}" rel="stylesheet">
		<script type="text/javascript" th:src="@{/mobile/js/jquery-3.1.1.js}" ></script>
		<script type="text/javascript" th:src="@{/mobile/js/mobile-util.js}"></script>
		<script th:src="@{/js/plugins/validate/jquery.validate.min.js}"></script>
		<script th:src="@{/js/plugins/validate/messages_zh.min.js}"></script>
		<script th:src="@{/js/plugins/layer/layer.js}"></script>
		<script th:src="@{/js/layui.js}"></script>
		<style>
			.sjlogo{
				width: 100%;
				height: 190px;
				float: left;
				margin-top:195px;
				text-align: center;
			}
			.sjlogo>img{
				width: 152px;
				height: 143px;
				margin-top:23px;
			}
			.sjlogo1{
				width:100%;
				float: left;
				margin-top:40px;
			}
			.sjlogo1-1{
				width: 630px;
				height: 700px;
				margin: 0 auto;
				overflow: hidden;
			}
			.sjlogo1-1 input{
				width: 592px;
				padding-left:30px;
				height: 95px;
				margin-top:13px;
				border:2px solid #eaeaea;
				font-size:28px;
			}
			.tijiao{
				width: 100%!important;
				background:#e5e5e5;
				color:#b4b4b4;
				padding: 0 !important;
			}
		</style>
	</head>
	<body>
		<div class="sjlogo">
			<img th:src="@{/mobile/images/sjlogo_03.jpg}" alt="">
		</div>
		<div class="sjlogo1">
			<div class="sjlogo1-1">
				<form id="signupForm">
					<input type="text" name="username" placeholder="账号" class="aa1">
					<input type="password" name="password" placeholder="请输入密码" class="aa">
					<input type="button" id="login" value="立即登录" class="tijiao">
				</form>
				<div style="overflow: hidden;line-height:92px;">
					<a href="" style="float: left; font-size:26px;color:#cbcbcb;">立即注册</a>
					<a href="" style="float: right; font-size:26px; color:#cbcbcb;">忘记密码？</a>
				</div>
			</div>
		</div>
	</body>
</html>
<script th:inline="javascript"> var ctx = [[@{/}]] ; </script>
<script>
   $(window).change(function(){
		if(($('.aa1').val()!=="")&&($('.aa').val()!=="")){
			$(".tijiao").css("background","#d7423b");
			$(".tijiao").css("color","#fff");
		}else{
			$(".tijiao").css("background","#e5e5e5");
			$(".tijiao").css("color","#b4b4b4");
		}
	})
	
	$(document).ajaxStart(function() {
		console.log("denglu");
		$("#login").val('登 录 中...').attr("disabled", true);
	}).ajaxStop(function() {
		$("#login").val('登 录').attr("disabled", false);
	}).ready(function() {
		$("#login").on('click', function() {
			console.log(123456);
			$("#signupForm").submit();
		});
		validateRule();
	});
   
   
   function login() {
		var self = $(this);
		$.ajax({
			type : "POST",
			url : ctx + "login",
			data : $('#signupForm').serialize(),
			success : function(r) {
				if (r.code == 0) {
					var index = layer.load(1, {
						shade : [ 0.1, '#fff' ]
					//0.1透明度的白色背景
					});
					window.location.href = r.url;
				} else if (r.status == 500) {
					layer.msg(r.message);
					self.find(".check-tips").text(r.message);
					//刷新验证码
					$(".reloadverify").click();
				} else {
					layer.msg(r.msg);
					self.find(".check-tips").text(r.msg);
					//刷新验证码
					$(".reloadverify").click();
				}
			},
		});
	}

	$.validator.setDefaults({
		submitHandler : function() {
			login();
		}
	});
	function validateRule() {

		var icon = "<i class='fa fa-times-circle'></i> ";
		$("#signupForm").validate({
			rules : {
				username : {
					required : true
				},
				password : {
					required : true
				}
				
			},
			messages : {
				username : {
					required : icon + "<span style='color:red'>请输入您的用户名</span>",
				},
				password : {
					required : icon + "<span style='color:red'>请输入您的密码</span>",
				}
			}
		})
	}
	
	
</script>
