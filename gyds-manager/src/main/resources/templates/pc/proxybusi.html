<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<link rel="stylesheet" type="text/css" th:href="@{/pc/css/personal.css}"/>
		<link rel="stylesheet" th:href="@{/pc/css/index.css}">
		<link rel="stylesheet" th:href="@{/pc/css/cwmx.css}">
		<link rel="stylesheet" th:href="@{/pc/css/guzhunaws.css}">
		<link rel="stylesheet" th:href="@{/pc/css/jibenziliao.css}">
		
		<link th:href="@{/css/layui.css}" rel="stylesheet">
		<script th:src="@{/pc/js/jquery-3.1.1.js}"></script>
		<script th:src="@{/js/plugins/validate/jquery.validate.min.js}"></script>
		<script th:src="@{/js/plugins/validate/messages_zh.min.js}"></script>
		<script th:src="@{/js/plugins/layer/layer.js}"></script>
		<script th:src="@{/js/layui.js}"></script>
		<script th:src="@{/pc/js/jquery-3.1.1.js}"></script>
		<style>
		  .yy-gz{
			  display: none;
		  }
		  .biaodanyy>label>span {
				display: inline-block;
				width: 122px !important;
				text-align: right;
				font-size: 14px;
				margin-right: 24px;
				color: #666666;
				float: left;
				line-height: 60px;
			}
		  .biaodanyy>label {
				display: block;
				width: 840px !important;
				margin-left: 50px;
            }
			.duoxianrt{
				    width: 661px;
					float: right;
					margin-top: 20px;
			}
			.duoxianrt input{
				margin-top:15px;
			}
			.tijiaohou{
				width: 80%;
				text-align: left;
				float: right;
				margin-top:30px;
			}
			.biaodanyy>label>div{
				width:338px;
				height: 180px;
				float: left;
				border:1px solid #f0f0f0;
				margin-right:5px;
				text-align: center;
				font-size:16px;
				color:#5c5c5c;
			}
			.biaodanyy>label>div>img{
				width: 235px;
				height: 138px;
				margin-top:36px;
			}
		</style>
	</head>
	<body>
			<!-- 右侧主内容 -->
			<div class="boxRight" style="background:#fff;width: 1006px;height: 1150px;margin-top:0;">
				<div class="cwmx">
					<h4>基本资料</h4>
				</div>
				<form action="" method="" class="biaodanyy">
				    <label>
						<span>真实姓名</span>
						<input type="text">
					</label>
					<label>
						<span>电话号码</span>
						<input type="text">
					</label>
					<label>
						<span>代理级别</span>
						<input type="radio" style="width:20px;" value="0" name="level" />省
						<input type="radio" style="width:20px;margin-left: 20px" value="1" name="level" />市
						<input type="radio" style="width:20px;margin-left: 20px" value="2" name="level" />县
					</label>
					<label>
						<span style="margin-left: -147px;">联系地址</span>
						<select class="juzhu" onchange="pronv()" id="pron" name="pronvice">
							<option value ="">省</option>
							<option th:each=" area : ${areaList}" th:value ="${area.regionCode}" th:text="${area.regionName}" ></option>
						</select>
						<select class="juzhu" onchange="cityQuery()" id="cityId" name="city">
							<option value ="">市</option>
						</select>
						<select class="juzhu" name="country" id="count">
							<option value ="">区/县</option>
						</select>
					</label>
					<label>
						<span>详细地址</span>
						<input type="text">
					</label>
					<label>
						<span>身份证号</span>
						<input type="text">
					</label>
					<label>
						<span>优势介绍</span>
						 <textarea name="" id="" cols="30" rows="10" style="width: 381px;height: 100px;resize:none;margin-top:20px;">
							 
						 </textarea>
					</label>
					<label>
						<span>上传身份证</span>
						 <div>
							 <img src="/pc/images/shenfenzhang_06.jpg" alt="" class="sfz1">
							 <p>身份证正面</p>
							 <input type="file" style="display: none;" id="sfz11">
						 </div>
						 <div>
							 <img src="/pc/images/shenfenzhang_03.jpg" alt="" class="sfz2">
							 <input type="file" style="display: none;"  id="sfz22">
							 <p>身份证反面</p>
						 </div>
					</label>
					<label>
						<span>居住地区</span>
						<select class="juzhu">
							<option value ="">省</option>
						</select>
						<select class="juzhu">
							<option value ="">市</option>
						</select>
						<select class="juzhu">
							<option value ="">区/县</option>
						</select>
					</label>
					<label>
						<input type="submit" value="提交申请" style="background:#ff0000;height:42px;color:#fff;border: none;margin:30px 0px 0px 100px;border-radius:3px ;">
					</label>
				</form>
				<div class="tijiaohou">
					<img src="/pc/images/hsusus_03.jpg" alt="">
					<p>如果通过审核，我们将在3个工作内通过电话与您沟通，请保持手机畅通，谢谢！</p>
				</div>
			</div>
		</div>
		<!-- 底部 -->
		<div th:replace="pc/include :: footer"></div>
	</body> 
</html>
<script src="/js/plugins/validate/jquery.validate.min.js"></script>
<script>
	$(".btn").mouseover(function(){
		 $(this).children("ul").show();
	});
	$(".btn").mouseout(function(){
		 $(this).children("ul").hide();
	})
	$('dt').click(function () {
		if($(this).nextUntil('dt','dd').is(':visible')){
			$(this).nextUntil('dt','dd').slideUp()
		}else{
			$(this).siblings('dd').slideUp().end().nextUntil('dt','dd').slideToggle();
		}
	});
	// $(".sfz1").click(function(){
	// 	$("#sfz11").click();
	// });
	// $(".sfz2").click(function(){
	// 	$("#sfz22").click();
	// })
	
	function pronv() {
		$.ajax({
            type : "post",
            dataType: "json",
            url : "/pc/proxybusi/city",
            data : {
            	'areaId': $("#pron").val()
            },
            success : function(result) {
            	console.log(result.areaList);
            	var areaList = result.areaList;
            	$("#cityId").html('');
            	var html = '<option value ="">市</option>';
            	$.each(areaList, function (n, value) {
            		html += '<option value =" '+ value.regionCode + '">' + value.regionName + '</option>';
            	});
            	$("#cityId").append(html);
            }
        });
	}
	
	function cityQuery() {
		$.ajax({
            type : "post",
            dataType: "json",
            url : "/pc/proxybusi/city",
            data : {
            	'areaId': $("#cityId").val()
            },
            success : function(result) {
            	console.log(result.areaList);
            	var areaList = result.areaList;
            	$("#count").html('');
            	var html = '<option value ="">区/县</option>';
            	$.each(areaList, function (n, value) {
            		html += '<option value =" '+ value.regionCode + '">' + value.regionName + '</option>';
            	});
            	$("#count").append(html);
            }
        });
	}
	
	
	$().ready(function() {
		validateRule();
	});

	$.validator.addMethod("isMobile", function(value, element) {
	    var length = value.length;
	    var mobile = /^(13[0-9]{9})|(18[0-9]{9})|(14[0-9]{9})|(17[0-9]{9})|(15[0-9]{9})$/;
	    return this.optional(element) || (length == 11 && mobile.test(value));
	}, "请正确填写您的手机号码");


	$.validator.setDefaults({
		submitHandler : function() {
			update();
		}
	});
	function update() {
		$.ajax({
			cache : true,
			type : "POST",
			url : "/member/member/update",
			data : $('#signupForm').serialize(),// 你的formid
			async : false,
			error : function(request) {
				parent.layer.alert("Connection error");
			},
			success : function(data) {
				if (data.code == 0) {
					parent.layer.msg("操作成功");
					parent.reLoad();
					var index = parent.layer.getFrameIndex(window.name); // 获取窗口索引
					parent.layer.close(index);

				} else {
					parent.layer.alert(data.msg)
				}

			}
		});

	}
	function validateRule() {
		var icon = "<i class='fa fa-times-circle'></i> ";
		$("#signupForm").validate({
			rules : {
				name : {
					required : true
				},
				telephone:{
			        required:true,
			        isMobile:true,
			    }
			},
			messages : {
				name : {
					required : icon + "请输入名字"
				},
				telephone : {  
			       required : "请输入手机号",  
			       isMobile : "请正确填写手机号码"  
			  	}
			}
		})
	}
	
</script>