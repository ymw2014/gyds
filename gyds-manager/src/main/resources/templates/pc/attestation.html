<!DOCTYPE html>
<html>
<head th:replace="pc/include :: head"></head>
<link rel="stylesheet" th:href="@{/pc/css/jibenziliao.css}">
<style>
.yy-gz {
	display: none;
}

.biaodanyy>label>span {
	display: inline-block;
	width: 122px !important;
	text-align: right;
	font-size: 14px;
	margin-right: 24px;
	color: #666666;
	float: left;
	line-height: 60px;
}

.biaodanyy>label {
	display: block;
	width: 840px !important;
	margin-left: 50px;
}

.duoxianrt {
	width: 661px;
	float: right;
	margin-top: 20px;
}

.duoxianrt input {
	margin-top: 20px;
}

.tijiaohou {
	width: 80%;
	text-align: left;
	float: right;
	margin-top: 50px;
}

.biaodanyy>label>div {
	width: 338px;
	height: 211px;
	float: left;
	border: 1px solid #f0f0f0;
	margin-right: 5px;
	text-align: center;
	font-size: 16px;
	color: #5c5c5c;
}

.biaodanyy>label>div>img {
	width: 235px;
	height: 138px;
	margin-top: 36px;
}
</style>
<body>
	<!-- 头部 -->
	<div class="boxRight"
		style="background: #fff; width: 1006px; height: 1125px; margin-top: 0;">
		<div class="cwmx">
			<h4>实名认证</h4>
		</div>
		<form id="signupForm" class="biaodanyy">
			<input type="hidden" name="userId" th:value="${user.userId}">
			<input type="hidden" name="teamId" th:value="${teamId}">
			<input type="hidden" name="type" th:value="${type}">
			<label> 
				<span>真实姓名</span> 
				<input name="name" type="text">
			</label>
			<label>
				<span>政治面貌</span>
				<select name="politicalStatus">
					<option selected="selected" >-请选择-</option>
					<option>共青团团员</option>
					<option>党员</option>
				</select>
			</label>
			<label>
				<span>民族</span>
				<select name="nation">
					 <option selected="selected" >-请选择-</option>
					 <option value="汉族">汉族</option> 
				     <option value="蒙古族">蒙古族</option>
				     <option value="回族">回族</option>
				     <option value="藏族">藏族</option>
				     <option value="维吾尔族">维吾尔族</option>
				     <option value="维吾尔族">维吾尔族</option>
				     <option value="苗族">苗族</option>
				     <option value="彝族">彝族</option>
				     <option value="壮族">壮族</option>
				     <option value="布依族">布依族</option>
				     <option value="朝鲜族">朝鲜族</option>
				     <option value="满族">满族</option>
				     <option value="侗族">侗族</option>
				     <option value="瑶族">瑶族</option>
				     <option value="白族">白族</option>
				     <option value="土家族">土家族</option>
				     <option value="哈尼族">哈尼族</option>
				     <option value="哈萨克族">哈萨克族</option>
				     <option value="傣族">傣族</option>
				     <option value="黎族">黎族</option>
				     <option value="傈僳族">傈僳族</option>
				     <option value="佤族">佤族</option>
				     <option value="畲族">畲族</option>
				     <option value="高山族">高山族</option>
				     <option value="拉祜族">拉祜族</option>
				     <option value="水族">水族</option>
				     <option value="东乡族">东乡族</option>
				     <option value="纳西族">纳西族</option>
				     <option value="景颇族">景颇族</option>
				     <option value="柯尔克孜族">柯尔克孜族</option>
				     <option value="土族">土族</option>
				     <option value="达斡尔族">达斡尔族</option>
				     <option value="仫佬族">仫佬族</option>
				     <option value="羌族">羌族</option>
				     <option value="布朗族">布朗族</option>
				     <option value="撒拉族">撒拉族</option>
				     <option value="毛南族">毛南族</option>
				     <option value="仡佬族">仡佬族</option>
				     <option value="锡伯族">锡伯族</option>
				     <option value="阿昌族">阿昌族</option>
				     <option value="普米族">普米族</option>
				     <option value="塔吉克族">塔吉克族</option>
				     <option value="怒族">怒族</option>
				     <option value="乌孜别克族">乌孜别克族</option>
				     <option value="俄罗斯族">俄罗斯族</option>
				     <option value="鄂温克族">鄂温克族</option>
				     <option value="德昂族">德昂族</option>
				     <option value="保安族">保安族</option>
				     <option value="裕固族">裕固族</option>
				     <option value="京族">京族</option>
				     <option value="塔塔尔族">塔塔尔族</option>
				     <option value="独龙族">独龙族</option>
				     <option value="鄂伦春族">鄂伦春族</option>
				     <option value="赫哲族">赫哲族</option>
				     <option value="门巴族">门巴族</option>
				     <option value="珞巴族">珞巴族</option>
				     <option value="基诺族">基诺族</option>


				</select>
			</label>
			<label> 
				<span>身份证号</span> 
				<input name="cardNo" type="text">
			</label> 
			<label> 
				<span>上传身份证</span>
				<div>
					<img th:src="@{/pc/images/shenfenzheng_01.jpg}" id="img" alt=""
						class="sfz1">
					<p>身份证正面</p>
					<input id="imgUrl" name="cardFrontImg" type="hidden" /> <input
						type="file" name="file" style="display: none;" id="file">
				</div>
			</label> <label>
				<div>
					<img th:src="@{/pc/images/shenfenzheng_02.jpg}" id="img1" alt=""
						class="sfz2"> <input id="imgUrl1" name="cardBackImg"
						type="hidden" /> <input type="file" name="file"
						style="display: none;" id="file1">
					<p>身份证反面</p>
				</div>
			</label>
			<label> 
				<span>邮箱地址</span> 
				<input name="email" type="text">
			</label>
			<label>
				<span>性别</span>
				<input type="radio" name="sex" value="0" class="xingbie">男
				<input type="radio" name="sex" value="1" class="xingbie">女
			</label> 
			<label> 
				<span>手机号码</span> 
				<input name="mobile" type="text">
			</label> <label> <span>联系地址</span> <input name="province"
				id="province" type="hidden"> <select class="juzhu" id="pron"
				onchange="pronv()">

					<option value="">省</option>
					<option th:each="area:${areaList}" th:value="${area.regionCode}"
						th:text="${area.regionName}"></option>
			</select> <input name="city" id="city" type="hidden"> <select
				class="juzhu" id="cityId" onchange="cityQuery()">
					<option value="">市</option>
			</select> <input name="district" id="district" type="hidden"> <select
				id="xian"  onchange="streetQuery()" class="juzhu">
					<option value="">区/县</option>
			</select>
			<input name="street" id="street" type="hidden"> <select
				id="jiedao" name="regionCode" onchange="streetDist()" class="juzhu">
					<option value="">街道</option>
			</select>
			</label> <label> <span>详细地址</span> <input name="address"
				type="text">
			</label> <label> <input type="button" id="save" value="提交申请"
				style="background: #ff0000; height: 42px; color: #fff; border: none; margin: 30px 0px 0px 100px; border-radius: 3px;">
			</label>
		</form>
		<div class="tijiaohou" id="message" style="display: none">
			<img src="images/hsusus_03.jpg" alt="">
			<p>如果通过审核，我们将在3个工作内通过电话与您沟通，请保持手机畅通，谢谢！</p>
		</div>
	</div>
</body>
</html>
<script>
	$(".btn").mouseover(function() {
		$(this).children("ul").show();
	});
	$(".btn").mouseout(function() {
		$(this).children("ul").hide();
	})
	$('dt').click(
			function() {
				if ($(this).nextUntil('dt', 'dd').is(':visible')) {
					$(this).nextUntil('dt', 'dd').slideUp()
				} else {
					$(this).siblings('dd').slideUp().end()
							.nextUntil('dt', 'dd').slideToggle();
				}
			});

	layui.use('upload', function() {
		var upload = layui.upload;

		//执行实例
		var uploadInst = upload.render({
			elem : '#file', //绑定元素
			url : '/common/sysFile/upload', //上传接口
			size : 1000,
			accept : 'file',
			done : function(r) {
				var fileName = r.fileName;
				$("#imgUrl").val(fileName);
				$("#img").attr("src", fileName);
			},
			error : function(r) {
				layer.msg(r.msg);
			}
		});

		//执行实例
		var uploadInst = upload.render({
			elem : '#file1', //绑定元素
			url : '/common/sysFile/upload', //上传接口
			size : 1000,
			accept : 'file',
			done : function(r) {
				var fileName = r.fileName;
				$("#imgUrl1").val(fileName);
				$("#img1").attr("src", fileName);
			},
			error : function(r) {
				layer.msg(r.msg);
			}
		});

	});
	//通过省编号获取市
	function pronv() {
		$("#province").val($("#pron").find("option:selected").text());
		$.ajax({
			type : "post",
			dataType : "json",
			url : "/pc/proxybusi/city",
			data : {
				'areaId' : $("#pron").val()
			},
			success : function(result) {
				var areaList = result.areaList;
				$("#cityId").html('');
				var html = '<option value ="">市</option>';
				$.each(areaList, function(n, value) {
					html += '<option value =" '+ value.regionCode + '">'
							+ value.regionName + '</option>';
				});
				$("#cityId").append(html);
			}
		});
	}
	//通过市编号获取县区
	function cityQuery() {
		$("#city").val($("#cityId").find("option:selected").text());
		$.ajax({
			type : "post",
			dataType : "json",
			url : "/pc/proxybusi/city",
			data : {
				'areaId' : $("#cityId").val()
			},
			success : function(result) {
				var areaList = result.areaList;
				$("#xian").html('');
				var html = '<option value ="">区/县</option>';
				$.each(areaList, function(n, value) {
					html += '<option value =" '+ value.regionCode + '">'
							+ value.regionName + '</option>';
				});
				$("#xian").append(html);
			}
		});
	}
	//通过区编号获取街道
	function streetQuery() {
		$("#district").val($("#xian").find("option:selected").text());
		$.ajax({
			type : "post",
			dataType : "json",
			url : "/pc/proxybusi/city",
			data : {
				'areaId' : $("#xian").val()
			},
			success : function(result) {
				var areaList = result.areaList;
				$("#jiedao").html('');
				var html = '<option value ="">街道</option>';
				$.each(areaList, function(n, value) {
					html += '<option value =" '+ value.regionCode + '">'
							+ value.regionName + '</option>';
				});
				$("#jiedao").append(html);
			}
		});
	}
	function streetDist() {
		$("#street").val($("#jiedao").find("option:selected").text());
	}

	$().ready(function() {
		$("#save").on('click', function() {
			$("#signupForm").submit();
		});
	})

	function save() {
		$.ajax({
			type : "POST",
			url : "/pc/realName",
			data : $('#signupForm').serialize(),
			success : function(r) {
				if (r.code == 0) {
					$("#signupForm").hide();
					$("#message").show();
				} else {
					layer.msg(r.msg);
					$(".reloadverify").click();
				}
			},
		});
	}

	$().ready(function() {
		validateRule();
	});

	$.validator.setDefaults({
		submitHandler : function() {
			save();
		}
	});
	function validateRule() {
		var icon = "<i class='fa fa-times-circle' ></i> ";
		$("#signupForm")
				.validate(
						{
							rules : {
								name : {
									required : true
								},
								mobile : {
									required : true,
									isMobile : true
								},
								liveAddress : {
									required : true
								},
								cardNo : {
									required : true,
									isIdCardNo : true
								},
								email : {
									required : true
								},//district
								sex : {
									required : true
								},
								district : {
									required : true
								}
							},
							messages : {
								name : {
									required : "<span style='color:red;margin-left:10px;'>请输入姓名</span>"
								},
								mobile : {
									required : "<span style='color:red;margin-left:10px;'>请输入手机号</span>",
									isMobile : "<span style='color:red;margin-left:10px;'>请输入正确的手机号</span>"
								},
								liveAddress : {
									required : "<span style='color:red;margin-left:10px;'>请输入详细地址</span>"
								},
								cardNo : {
									required : "<span style='color:red;margin-left:10px;'>请输入身份证</span>",
									isIdCardNo : "<span style='color:red;margin-left:10px;'>请输入正确的身份证号</span>"
								},
								email : {
									required : "<span style='color:red;margin-left:10px;'>请输入邮箱地址</span>"
								},
								sex : {
									required : "<span style='color:red;margin-left:10px;'>性别不能为空</span>"
								},
								district : {
									required : "<span style='color:red;margin-left:10px;'>请选择地区</span>"
								}
							}
						})
	}
</script>